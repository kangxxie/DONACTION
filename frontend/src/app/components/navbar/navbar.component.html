<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-logo">
      <a routerLink="/">
        <span class="logo-icon">❤</span>
        <span class="logo-text">
          <span class="don">DON</span><span class="action">ACTION</span>
        </span>
      </a>
    </div>
    
    <!-- Desktop Navigation -->
    <div class="desktop-nav">
      <div class="nav-links">
        <a routerLink="/campaigns" class="nav-item" routerLinkActive="active">Campagne</a>
        <a routerLink="/about" class="nav-item" routerLinkActive="active">Chi Siamo</a>
        <a routerLink="/contact" class="nav-item" routerLinkActive="active">Contatti</a>
      </div>
    </div>
    
    <!-- Mobile Navigation Dropdown -->
    <div class="mobile-nav">      <button class="mobile-dropdown-button" (click)="toggleNavDropdown($event)" [class.active]="isNavDropdownOpen">
        <i class="fas fa-bars"></i>
      </button>
      <div class="mobile-dropdown-menu" [class.show]="isNavDropdownOpen">
        <a routerLink="/campaigns" class="dropdown-item" routerLinkActive="active" (click)="closeNavDropdown()">Campagne</a>
        <a routerLink="/about" class="dropdown-item" routerLinkActive="active" (click)="closeNavDropdown()">Chi Siamo</a>
        <a routerLink="/contact" class="dropdown-item" routerLinkActive="active" (click)="closeNavDropdown()">Contatti</a>
      </div>
    </div>
    
    <!-- Auth Section -->
    <div class="auth-section">
      <!-- Non-authenticated user -->
      <ng-container *ngIf="!isLoggedIn">
        <a routerLink="/login" class="login-btn">
          <span class="desktop-text">Accedi</span>
          <i class="fas fa-sign-in-alt mobile-icon"></i>
        </a>
      </ng-container>
        <!-- Authenticated user -->
      <ng-container *ngIf="isLoggedIn">
        <div class="user-dropdown">          <button class="user-dropdown-trigger" (click)="toggleDropdown($event)">
            <span class="user-avatar desktop-display">{{ userName.charAt(0) }}</span>
            <span class="user-name desktop-display">{{ userName }}</span>
            <i class="fas fa-user mobile-icon"></i>
          </button>          <div class="user-dropdown-menu" [class.show]="isDropdownOpen">
            <a routerLink="/profile" class="dropdown-item" (click)="closeDropdown()">Il Mio Profilo</a>
            
            <!-- Admin/Team options -->
            <ng-container *ngIf="isAdmin || isTeam">
              <div class="dropdown-divider"></div>
              <a routerLink="/admin/dashboard" class="dropdown-item" (click)="closeDropdown()">Dashboard Admin</a>
              <a routerLink="/admin/campaigns" class="dropdown-item" (click)="closeDropdown()">Gestione Campagne</a>
              <a routerLink="/admin/campaigns/new" class="dropdown-item" (click)="closeDropdown()">Nuova Campagna</a>
              
              <!-- Admin-only options -->
              <ng-container *ngIf="isAdmin">
                <a routerLink="/admin/users" class="dropdown-item" (click)="closeDropdown()">Gestione Utenti</a>
                <a routerLink="/admin/donations" class="dropdown-item" (click)="closeDropdown()">Registro Donazioni</a>
              </ng-container>
            </ng-container>
            
            <div class="dropdown-divider"></div>
            <a (click)="logout(); closeDropdown()" class="dropdown-item logout-item">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span>
            </a>
          </div>
        </div>        
        <!-- Donate button (only on desktop) -->
        <a routerLink="/campaigns" class="donate-btn desktop-display">
          <span class="donate-icon">❤</span>
          <span>Dona Ora</span>
        </a>
      </ng-container>
    </div>
  </div>
</nav>
